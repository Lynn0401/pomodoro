#:kivy 1.8.0
#:import AliasProperty kivy.properties.AliasProperty
#:import iconic_font_name config.KIVY_ICONIC_FONT
#:import iconic_font_path config.KIVY_ICONIC_FONT_PATH
#:import default_font_name config.KIVY_DEFAULT_FONT
#:import default_font_path config.KIVY_DEFAULT_FONT_PATH
#:import default_book_font_name config.KIVY_DEFAULT_BOOK_FONT
#:import default_book_font_path config.KIVY_DEFAULT_BOOK_FONT_PATH
#:import default_extralight_font_name config.KIVY_DEFAULT_EXTRALIGHT_FONT
#:import default_extralight_font_path config.KIVY_DEFAULT_EXTRALIGHT_FONT_PATH
#:import KIVY_VERSION config.KIVY_VERSION
#:import COLOR_GREEN config.COLOR_GREEN

<Button>
	background_normal: ""
	background_down: ""
	background_disabled_down: ""
	background_disabled_normal: ""
	has_hover: True
	inactive: True

<image>
    canvas.before:
        Color:
            rgba: .98, .98, .98, 1
        Rectangle:
            pos: self.pos
            size: self.size
    pos: self.parent.pos
    size: self.parent.size

<Pomodoro>
	orientation: 'vertical'

	minimize_but: minimize_but
	settings_but: settings_but
	play_but: play_but
	pause_but: pause_but
	stop_but: stop_but
	message: message
	toggle_source: toggle_source
    sm: sm

    ScreenManager:
        id: sm
        action_screen: action_screen
        settings_screen: settings_screen

        Screen:
            id: action_screen
            name: "action_screen"
            BoxLayout:
                orientation: 'vertical'
            	BoxLayout:
            		size_hint: 1.0, None
            		height: 35
            		pos_hint: {'top': 1}
            		Button:
            			id: minimize_but
                        size_hint: None, None
                        size: 30, 30
                        has_hover: False
                        name: "minimize"
                        ranged: (self.pos[0]+self.width, self.pos[1]+self.height)
            			Image:
    	        		    source: "assets/icons/minify.png"
            		TextInput:
            			id: message
            			size_hint_y: None
            			hint_text: 'Enter your sprint info.'
            			height: 30
            			font_size: 12
            			multiline: False
            			font_name: default_book_font_name
            			background_color: 1, 1, 1, 1
            			on_text_validate: root.keep_info()
            			disabled: True
            			background_disabled_active: ""
            			background_disabled_normal: ""
            			background_normal: ""
            			background_active: ""
            		Button:
            			id: settings_but
                        size_hint: None, None
                        size: 30, 30
                        name: "settings"
                        ranged: (self.pos[0]+self.width, self.pos[1]+self.height)
                        on_press: root.switch_screen('settings_screen')
            			Image:
            				inactive: "assets/icons/settings_hover.png"
            				source: "assets/icons/settings.png" if self.parent.inactive else "assets/icons/settings_hover.png"

            	BoxLayout:
					height: 75
					Label:
						size_hint_x: None
						width: 60
	            	Label:
	            		size_hint_y: None
	            		height: 75
	            		text_size: self.width, None
	            		text: "[color=455A64]%s[/color]"%root.time_minute
	            		markup: True
	            		font_name: default_extralight_font_name
	            		font_size: 72
	            	Label:
	            		size_hint: None, None
	            		size: 20, 75
	            		text: "[color=455A64]:[/color]"
	            		markup: True
	            		font_name: default_extralight_font_name
	            		font_size: 72
	            	Label:
	            		size_hint_y: None
	            		height: 75
	            		text_size: self.width, None
	            		text: "[color=455A64]%s[/color]"%root.time_second
	            		markup: True
	            		halign: 'right'
	            		font_name: default_extralight_font_name
	            		font_size: 72
	            	Label:
						size_hint_x: None
						width: 60

            	FloatLayout:
            		size_hint: 1.0, None
            		height: 30

            		Button:
            			id: play_but
            			size_hint: None, None
                        size: 26, 26
                        name: "play"
                        ranged: (self.pos[0]+self.width, self.pos[1]+self.height)
                        on_press: root.start_animation()
                        pos: 64, 10
            			Image:
            				inactive: "assets/icons/play_hover.png"
            				source: "assets/icons/play_hover.png" if (not self.parent.inactive or self.parent.disabled) and root.state in ('paused', 'work', 'break') else "assets/icons/play.png"

            		Button:
            			id: pause_but
            			size_hint: None, None
                        size: 26, 26
                        name: "pause"
                        ranged: (self.pos[0]+self.width, self.pos[1]+self.height)
                        on_press: root.pause_animation()
                        pos: 138, 10
            			Image:
            				inactive: "assets/icons/pause_hover.png"
            				source: "assets/icons/pause_hover.png" if (not self.parent.inactive or self.parent.disabled) and root.state in ('paused','work') else "assets/icons/pause.png"

            		Button:
            			id: stop_but
            			size_hint: None, None
                        size: 26, 26
                        name: "stop"
                        ranged: (self.pos[0]+self.width, self.pos[1]+self.height)
                        on_press: root.stop_animation()
                        pos: 208, 10
            			Image:
            				inactive: "assets/icons/stop_hover.png"
            				source: "assets/icons/stop.png" if self.parent.inactive else "assets/icons/stop_hover.png"
            	Label:
            		size_hint: 1.0, None
            		height: 10

        Screen:
            id: settings_screen
            name: "settings_screen"
            FloatLayout:
                Button:
                    size_hint: None, None
                    size: 54, 21
                    on_press: root.switch_screen('action_screen')
                    pos: 235, 115
                    has_hover: False
                    inactive: False
        			Image:
        				source: "assets/icons/done_light.png"

                Label:
                    size_hint: None, None
                    size: 21, 25
                    pos: 10, 115
                    Image:
        				source: "assets/icons/volume.png"
        		Label:
                    size_hint: None, None
                    size: 21, 25
                    pos: 50, 115
                    text: "[color=455A64]Volume[/color]"
                    font_size: 13
                    font_name: default_book_font_name
                    markup: True

                BoxLayout:
                    canvas.before:
                        Color:
                            rgba: COLOR_GREEN
                        Rectangle:
                            size: 160, 3
                            pos: self.pos[0], self.pos[1]+10
                	orientation: 'vertical'

                    scatter: scatter

                    size_hint: None, None
                    height: 20
                    width: 160
                    pos: 10, 90

                    MyScatterLayout:
                        id: scatter
                        pos_hint: {'right': 1}
                        size_hint: None, None
                        size: 20, 20
                        do_rotation: False
                        do_translation_y: False
                        do_scale: False
                        pos: self.parent.pos[0]+40, self.parent.pos[1]
                        Image:
                            source: "assets/icons/volume_handle.png"
                            pos: self.parent.pos[0]+10, self.parent.pos[1]

				Label:
                	text: '[color=455A64]Theme[/color]'
                	size_hint: None, None
                	size: 40, 20
                	pos: 37, 60
					font_size: 13
                    font_name: default_book_font_name
                    markup: True
                
                Label:
                	text: '[color=455A64]Dark[/color]'
                	size_hint: None, None
                	size: 35, 20
                	pos: 37, 40
					font_size: 13
                    font_name: default_book_font_name
                    text_size: self.width, None
                    halign: 'left'
                    markup: True
                
                Button:
                	size_hint: None, None
                	size: 30, 20
                	pos: 75, 40
                	on_press: root.change_theme()
					Image:
						id: toggle_source
                    	source: "assets/icons/switches_to_dark.png"

				Label:
                	text: '[color=455A64]Light[/color]'
                	size_hint: None, None
                	size: 40, 20
                	pos: 107, 40
					font_size: 13
                    font_name: default_book_font_name
                    text_size: self.width, self.height
                    halign: 'right'
                    markup: True

